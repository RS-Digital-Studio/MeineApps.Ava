<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:BomberBlast.ViewModels"
             xmlns:mi="using:Material.Icons.Avalonia"
             xmlns:loc="using:MeineApps.Core.Ava.Localization"
             xmlns:controls="using:BomberBlast.Controls"
             x:Class="BomberBlast.Views.HighScoresView"
             x:DataType="vm:HighScoresViewModel">

  <Panel AutomationProperties.AutomationId="HighScores_Root">
    <controls:MenuBackgroundCanvas />

    <Grid RowDefinitions="Auto,*">

      <!-- Header mit Gradient -->
      <Border Grid.Row="0"
              Classes="CardElevated"
              Padding="16,12"
              CornerRadius="0,0,12,12">
        <Border.Background>
          <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
            <GradientStop Color="#30FFD700" Offset="0" />
            <GradientStop Color="Transparent" Offset="1" />
          </LinearGradientBrush>
        </Border.Background>
        <Grid ColumnDefinitions="Auto,*,Auto">
          <!-- Back Button -->
          <Button Classes="Text"
                  Command="{Binding GoBackCommand}"
                  AutomationProperties.AutomationId="HighScores_BtnBack">
            <mi:MaterialIcon Kind="ArrowLeft" Width="24" Height="24" />
          </Button>

          <!-- Title -->
          <StackPanel Grid.Column="1"
                      Orientation="Horizontal"
                      HorizontalAlignment="Center"
                      Spacing="8">
            <mi:MaterialIcon Kind="Trophy" Width="28" Height="28"
                             Foreground="#FFD700" />
            <TextBlock Text="{loc:Translate HighScores}"
                       FontSize="22" FontWeight="Bold"
                       Foreground="#FFD700"
                       AutomationProperties.AutomationId="HighScores_TxtTitle" />
          </StackPanel>

          <!-- Spacer -->
          <Border Grid.Column="2" Width="44" />
        </Grid>
      </Border>

      <!-- Score List -->
      <ScrollViewer Grid.Row="1"
                    HorizontalScrollBarVisibility="Disabled"
                    VerticalScrollBarVisibility="Auto">
        <Panel Margin="12,12,12,80">
          <!-- Scores List -->
          <ItemsControl ItemsSource="{Binding Scores}"
                        IsVisible="{Binding HasScores}"
                        AutomationProperties.AutomationId="HighScores_ScoreList">
            <ItemsControl.ItemTemplate>
              <DataTemplate x:DataType="vm:ScoreDisplayItem">
                <Panel>
                  <!-- Rang 1: Gold-Gradient + Gold-Border -->
                  <Border Classes="Card" Margin="0,4"
                          BoxShadow="0 2 8 0 #25000000"
                          IsVisible="{Binding IsRank1}">
                    <Border BorderThickness="3,0,0,0"
                            BorderBrush="#FFD700"
                            CornerRadius="8"
                            Padding="12,10">
                      <Border.Background>
                        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                          <GradientStop Color="#25FFD700" Offset="0" />
                          <GradientStop Color="Transparent" Offset="0.6" />
                        </LinearGradientBrush>
                      </Border.Background>
                      <Grid ColumnDefinitions="48,*,Auto">
                        <Panel VerticalAlignment="Center" Width="36" Height="36">
                          <mi:MaterialIcon Kind="Trophy" Width="30" Height="30"
                                           Foreground="#FFD700"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center" />
                        </Panel>
                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                          <TextBlock Text="{Binding Name}"
                                     FontSize="18" FontWeight="Bold"
                                     Foreground="{DynamicResource TextPrimaryBrush}" />
                          <TextBlock Text="{Binding WaveText}"
                                     FontSize="12"
                                     Foreground="{DynamicResource TextSecondaryBrush}" />
                        </StackPanel>
                        <TextBlock Grid.Column="2"
                                   Text="{Binding ScoreText}"
                                   FontSize="22" FontWeight="Bold"
                                   Foreground="#FFD700"
                                   VerticalAlignment="Center" />
                      </Grid>
                    </Border>
                  </Border>

                  <!-- Rang 2: Silber-Gradient + Silber-Border -->
                  <Border Classes="Card" Margin="0,4"
                          BoxShadow="0 2 8 0 #25000000"
                          IsVisible="{Binding IsRank2}">
                    <Border BorderThickness="3,0,0,0"
                            BorderBrush="#C0C0C0"
                            CornerRadius="8"
                            Padding="12,10">
                      <Border.Background>
                        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                          <GradientStop Color="#20C0C0C0" Offset="0" />
                          <GradientStop Color="Transparent" Offset="0.6" />
                        </LinearGradientBrush>
                      </Border.Background>
                      <Grid ColumnDefinitions="48,*,Auto">
                        <Panel VerticalAlignment="Center" Width="36" Height="36">
                          <mi:MaterialIcon Kind="Trophy" Width="28" Height="28"
                                           Foreground="#C0C0C0"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center" />
                        </Panel>
                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                          <TextBlock Text="{Binding Name}"
                                     FontSize="18" FontWeight="Bold"
                                     Foreground="{DynamicResource TextPrimaryBrush}" />
                          <TextBlock Text="{Binding WaveText}"
                                     FontSize="12"
                                     Foreground="{DynamicResource TextSecondaryBrush}" />
                        </StackPanel>
                        <TextBlock Grid.Column="2"
                                   Text="{Binding ScoreText}"
                                   FontSize="22" FontWeight="Bold"
                                   Foreground="#C0C0C0"
                                   VerticalAlignment="Center" />
                      </Grid>
                    </Border>
                  </Border>

                  <!-- Rang 3: Bronze-Gradient + Bronze-Border -->
                  <Border Classes="Card" Margin="0,4"
                          BoxShadow="0 2 8 0 #25000000"
                          IsVisible="{Binding IsRank3}">
                    <Border BorderThickness="3,0,0,0"
                            BorderBrush="#CD7F32"
                            CornerRadius="8"
                            Padding="12,10">
                      <Border.Background>
                        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                          <GradientStop Color="#20CD7F32" Offset="0" />
                          <GradientStop Color="Transparent" Offset="0.6" />
                        </LinearGradientBrush>
                      </Border.Background>
                      <Grid ColumnDefinitions="48,*,Auto">
                        <Panel VerticalAlignment="Center" Width="36" Height="36">
                          <mi:MaterialIcon Kind="Trophy" Width="26" Height="26"
                                           Foreground="#CD7F32"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center" />
                        </Panel>
                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                          <TextBlock Text="{Binding Name}"
                                     FontSize="18" FontWeight="Bold"
                                     Foreground="{DynamicResource TextPrimaryBrush}" />
                          <TextBlock Text="{Binding WaveText}"
                                     FontSize="12"
                                     Foreground="{DynamicResource TextSecondaryBrush}" />
                        </StackPanel>
                        <TextBlock Grid.Column="2"
                                   Text="{Binding ScoreText}"
                                   FontSize="22" FontWeight="Bold"
                                   Foreground="#CD7F32"
                                   VerticalAlignment="Center" />
                      </Grid>
                    </Border>
                  </Border>

                  <!-- Rang 4+: Akzent-Border + BoxShadow -->
                  <Border Classes="Card" Margin="0,4"
                          BoxShadow="0 2 8 0 #25000000"
                          IsVisible="{Binding IsRankOther}">
                    <Border BorderThickness="3,0,0,0"
                            BorderBrush="{DynamicResource AccentBrush}"
                            CornerRadius="8"
                            Padding="12,10">
                      <Grid ColumnDefinitions="48,*,Auto">
                        <Panel VerticalAlignment="Center" Width="36" Height="36">
                          <TextBlock Text="{Binding Rank}"
                                     FontSize="24" FontWeight="Bold"
                                     Foreground="{Binding RankBrush}"
                                     HorizontalAlignment="Center"
                                     VerticalAlignment="Center" />
                        </Panel>
                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                          <TextBlock Text="{Binding Name}"
                                     FontSize="18" FontWeight="Bold"
                                     Foreground="{DynamicResource TextPrimaryBrush}" />
                          <TextBlock Text="{Binding WaveText}"
                                     FontSize="12"
                                     Foreground="{DynamicResource TextSecondaryBrush}" />
                        </StackPanel>
                        <TextBlock Grid.Column="2"
                                   Text="{Binding ScoreText}"
                                   FontSize="22" FontWeight="Bold"
                                   Foreground="{DynamicResource AccentBrush}"
                                   VerticalAlignment="Center" />
                      </Grid>
                    </Border>
                  </Border>
                </Panel>
              </DataTemplate>
            </ItemsControl.ItemTemplate>
          </ItemsControl>

          <!-- Empty State -->
          <StackPanel VerticalAlignment="Center"
                      HorizontalAlignment="Center"
                      IsVisible="{Binding !HasScores}"
                      AutomationProperties.AutomationId="HighScores_EmptyState">
            <mi:MaterialIcon Kind="TrophyBroken" Width="64" Height="64"
                             Foreground="{DynamicResource TextMutedBrush}"
                             HorizontalAlignment="Center" />
            <TextBlock Text="{loc:Translate NoHighScoresYet}"
                       FontSize="20"
                       Foreground="{DynamicResource TextMutedBrush}"
                       HorizontalAlignment="Center"
                       Margin="0,12,0,0"
                       AutomationProperties.AutomationId="HighScores_TxtNoScores" />
          </StackPanel>
        </Panel>
      </ScrollViewer>

    </Grid>
  </Panel>

</UserControl>
