<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:BomberBlast.ViewModels"
             xmlns:mi="using:Material.Icons.Avalonia"
             xmlns:loc="using:MeineApps.Core.Ava.Localization"
             x:Class="BomberBlast.Views.SettingsView"
             x:DataType="vm:SettingsViewModel">

  <!-- Gradient Background -->
  <Panel AutomationProperties.AutomationId="Settings_Root">
    <Border>
      <Border.Background>
        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
          <GradientStop Color="{DynamicResource GradientStartColor}" Offset="0" />
          <GradientStop Color="{DynamicResource GradientMidColor}" Offset="0.5" />
          <GradientStop Color="{DynamicResource GradientEndColor}" Offset="1" />
        </LinearGradientBrush>
      </Border.Background>
    </Border>

    <Grid RowDefinitions="Auto,*">

      <!-- Header -->
      <Border Grid.Row="0"
              Classes="CardElevated"
              Padding="16,12"
              CornerRadius="0,0,12,12">
        <Grid ColumnDefinitions="Auto,*,Auto">
          <!-- Back Button -->
          <Button AutomationProperties.AutomationId="Settings_BtnBack"
                  Classes="Text"
                  Command="{Binding GoBackCommand}">
            <mi:MaterialIcon Kind="ArrowLeft" Width="24" Height="24" />
          </Button>

          <!-- Title -->
          <StackPanel Grid.Column="1"
                      Orientation="Horizontal"
                      HorizontalAlignment="Center"
                      Spacing="8">
            <mi:MaterialIcon Kind="CogOutline" Width="24" Height="24"
                             Foreground="{DynamicResource PrimaryBrush}" />
            <TextBlock AutomationProperties.AutomationId="Settings_TxtTitle"
                       Text="{loc:Translate Settings}"
                       FontSize="22" FontWeight="Bold"
                       Foreground="{DynamicResource TextPrimaryBrush}" />
          </StackPanel>

          <!-- Spacer -->
          <Border Grid.Column="2" Width="44" />
        </Grid>
      </Border>

      <!-- Content -->
      <ScrollViewer Grid.Row="1"
                    HorizontalScrollBarVisibility="Disabled"
                    VerticalScrollBarVisibility="Auto">
        <StackPanel Spacing="12" Margin="16">

          <!-- Controls + Sound: Side by Side -->
          <Grid ColumnDefinitions="*,*">

            <!-- Controls Section -->
            <Border AutomationProperties.AutomationId="Settings_ControlsSection"
                    Grid.Column="0" Classes="SettingsCard" Margin="0,0,6,0">
              <StackPanel Spacing="12">
                <StackPanel Orientation="Horizontal" Spacing="8">
                  <mi:MaterialIcon Kind="Gamepad" Width="20" Height="20"
                                   Foreground="{DynamicResource PrimaryBrush}" />
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtControlsTitle"
                             Text="{loc:Translate ControlsSection}"
                             FontSize="16" FontWeight="Bold"
                             Foreground="{DynamicResource TextPrimaryBrush}" />
                </StackPanel>

                <!-- Joystick-Modus: Schwebend oder Fixiert -->
                <Grid ColumnDefinitions="*,Auto">
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtJoystickFixed"
                             Text="{loc:Translate JoystickModeFixed}"
                             FontSize="12"
                             Foreground="{DynamicResource TextPrimaryBrush}"
                             VerticalAlignment="Center" />
                  <ToggleSwitch AutomationProperties.AutomationId="Settings_ToggleJoystickFixed"
                                Grid.Column="1"
                                OnContent="" OffContent=""
                                IsChecked="{Binding JoystickFixed}" />
                </Grid>

                <!-- Joystick Size -->
                <Grid ColumnDefinitions="Auto,*,36">
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtJoystickSize"
                             Text="{loc:Translate JoystickSize}"
                             FontSize="11" TextTrimming="None"
                             Foreground="{DynamicResource TextPrimaryBrush}"
                             VerticalAlignment="Center" />
                  <Slider AutomationProperties.AutomationId="Settings_SliderJoystickSize"
                          Grid.Column="1"
                          Minimum="80" Maximum="160"
                          Value="{Binding JoystickSize}"
                          Margin="4,0" />
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtJoystickSizeValue"
                             Grid.Column="2"
                             Text="{Binding JoystickSizeText}"
                             FontSize="11"
                             Foreground="{DynamicResource AccentBrush}"
                             HorizontalAlignment="Right"
                             VerticalAlignment="Center" />
                </Grid>

                <!-- Joystick Opacity -->
                <Grid ColumnDefinitions="Auto,*,36">
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtJoystickOpacity"
                             Text="{loc:Translate JoystickOpacity}"
                             FontSize="11" TextTrimming="None"
                             Foreground="{DynamicResource TextPrimaryBrush}"
                             VerticalAlignment="Center" />
                  <Slider AutomationProperties.AutomationId="Settings_SliderJoystickOpacity"
                          Grid.Column="1"
                          Minimum="0.3" Maximum="1.0"
                          Value="{Binding JoystickOpacity}"
                          Margin="4,0" />
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtJoystickOpacityValue"
                             Grid.Column="2"
                             Text="{Binding JoystickOpacityText}"
                             FontSize="11"
                             Foreground="{DynamicResource AccentBrush}"
                             HorizontalAlignment="Right"
                             VerticalAlignment="Center" />
                </Grid>

                <!-- Haptic Feedback -->
                <Grid ColumnDefinitions="*,Auto">
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtHaptic"
                             Text="{loc:Translate HapticFeedback}"
                             FontSize="12"
                             Foreground="{DynamicResource TextPrimaryBrush}"
                             VerticalAlignment="Center" />
                  <ToggleSwitch AutomationProperties.AutomationId="Settings_ToggleHaptic"
                                Grid.Column="1"
                                OnContent="" OffContent=""
                                IsChecked="{Binding HapticEnabled}" />
                </Grid>

                <!-- Reduzierte Effekte (ScreenShake, Partikel, Hit-Pause) -->
                <Grid ColumnDefinitions="*,Auto">
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtReducedEffects"
                             Text="{loc:Translate ReducedEffects}"
                             FontSize="12"
                             Foreground="{DynamicResource TextPrimaryBrush}"
                             VerticalAlignment="Center" />
                  <ToggleSwitch AutomationProperties.AutomationId="Settings_ToggleReducedEffects"
                                Grid.Column="1"
                                OnContent="" OffContent=""
                                IsChecked="{Binding ReducedEffects}" />
                </Grid>
              </StackPanel>
            </Border>

            <!-- Sound Section -->
            <Border AutomationProperties.AutomationId="Settings_SoundSection"
                    Grid.Column="1" Classes="SettingsCard" Margin="6,0,0,0">
              <StackPanel Spacing="12">
                <StackPanel Orientation="Horizontal" Spacing="8">
                  <mi:MaterialIcon Kind="VolumeHigh" Width="20" Height="20"
                                   Foreground="{DynamicResource PrimaryBrush}" />
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtSoundTitle"
                             Text="{loc:Translate SoundSection}"
                             FontSize="16" FontWeight="Bold"
                             Foreground="{DynamicResource TextPrimaryBrush}" />
                </StackPanel>

                <!-- SFX Toggle -->
                <Grid ColumnDefinitions="*,Auto">
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtSfx"
                             Text="{loc:Translate SoundEffects}"
                             FontSize="12"
                             Foreground="{DynamicResource TextPrimaryBrush}"
                             VerticalAlignment="Center" />
                  <ToggleSwitch AutomationProperties.AutomationId="Settings_ToggleSfx"
                                Grid.Column="1"
                                OnContent="" OffContent=""
                                IsChecked="{Binding SfxEnabled}" />
                </Grid>

                <!-- SFX Volume -->
                <Grid ColumnDefinitions="Auto,*,36">
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtSfxVolume"
                             Text="{loc:Translate SfxVolume}"
                             FontSize="11" TextTrimming="None"
                             Foreground="{DynamicResource TextPrimaryBrush}"
                             VerticalAlignment="Center" />
                  <Slider AutomationProperties.AutomationId="Settings_SliderSfxVolume"
                          Grid.Column="1"
                          Minimum="0" Maximum="1"
                          Value="{Binding SfxVolume}"
                          Margin="4,0" />
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtSfxVolumeValue"
                             Grid.Column="2"
                             Text="{Binding SfxVolumeText}"
                             FontSize="11"
                             Foreground="{DynamicResource AccentBrush}"
                             HorizontalAlignment="Right"
                             VerticalAlignment="Center" />
                </Grid>

                <!-- Music Toggle -->
                <Grid ColumnDefinitions="*,Auto">
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtMusic"
                             Text="{loc:Translate Music}"
                             FontSize="12"
                             Foreground="{DynamicResource TextPrimaryBrush}"
                             VerticalAlignment="Center" />
                  <ToggleSwitch AutomationProperties.AutomationId="Settings_ToggleMusic"
                                Grid.Column="1"
                                OnContent="" OffContent=""
                                IsChecked="{Binding MusicEnabled}" />
                </Grid>

                <!-- Music Volume -->
                <Grid ColumnDefinitions="Auto,*,36">
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtMusicVolume"
                             Text="{loc:Translate MusicVolume}"
                             FontSize="11" TextTrimming="None"
                             Foreground="{DynamicResource TextPrimaryBrush}"
                             VerticalAlignment="Center" />
                  <Slider AutomationProperties.AutomationId="Settings_SliderMusicVolume"
                          Grid.Column="1"
                          Minimum="0" Maximum="1"
                          Value="{Binding MusicVolume}"
                          Margin="4,0" />
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtMusicVolumeValue"
                             Grid.Column="2"
                             Text="{Binding MusicVolumeText}"
                             FontSize="11"
                             Foreground="{DynamicResource AccentBrush}"
                             HorizontalAlignment="Right"
                             VerticalAlignment="Center" />
                </Grid>
              </StackPanel>
            </Border>

          </Grid>

          <!-- Visual Style Section -->
          <Border AutomationProperties.AutomationId="Settings_VisualSection"
                  Classes="SettingsCard">
            <StackPanel Spacing="12">
              <StackPanel Orientation="Horizontal" Spacing="8">
                <mi:MaterialIcon Kind="PaletteOutline" Width="20" Height="20"
                                 Foreground="{DynamicResource PrimaryBrush}" />
                <TextBlock AutomationProperties.AutomationId="Settings_TxtVisualTitle"
                           Text="{Binding VisualStyleText}"
                           FontSize="16" FontWeight="Bold"
                           Foreground="{DynamicResource TextPrimaryBrush}" />
              </StackPanel>

              <Grid ColumnDefinitions="*,*,*" RowDefinitions="Auto">
                <!-- Classic Style -->
                <Border Grid.Column="0"
                        Margin="0,0,4,0"
                        CornerRadius="8"
                        Padding="10,8"
                        Cursor="Hand"
                        Background="{DynamicResource SurfaceBrush}">
                  <Border.Styles>
                    <Style Selector="Border">
                      <Setter Property="BorderBrush" Value="Transparent" />
                      <Setter Property="BorderThickness" Value="2" />
                    </Style>
                  </Border.Styles>
                  <RadioButton AutomationProperties.AutomationId="Settings_RadioClassic"
                               GroupName="VisualStyle"
                               IsChecked="{Binding IsClassicSelected}">
                    <StackPanel Spacing="4">
                      <Grid ColumnDefinitions="Auto,*">
                        <Border Width="24" Height="24" CornerRadius="4" Margin="0,0,6,0">
                          <Border.Background>
                            <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                              <GradientStop Color="#DCD2BE" Offset="0" />
                              <GradientStop Color="#B4783C" Offset="0.5" />
                              <GradientStop Color="#505560" Offset="1" />
                            </LinearGradientBrush>
                          </Border.Background>
                        </Border>
                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                          <TextBlock AutomationProperties.AutomationId="Settings_TxtClassicName"
                                     Text="{Binding ClassicStyleName}"
                                     FontSize="13" FontWeight="SemiBold"
                                     Foreground="{DynamicResource TextPrimaryBrush}" />
                          <TextBlock AutomationProperties.AutomationId="Settings_TxtClassicDesc"
                                     Text="{Binding ClassicStyleDesc}"
                                     FontSize="9"
                                     Foreground="{DynamicResource TextMutedBrush}" />
                        </StackPanel>
                      </Grid>
                    </StackPanel>
                  </RadioButton>
                </Border>

                <!-- Neon Style -->
                <Border Grid.Column="1"
                        Margin="4,0,4,0"
                        CornerRadius="8"
                        Padding="10,8"
                        Cursor="Hand"
                        Background="{DynamicResource SurfaceBrush}">
                  <Border.Styles>
                    <Style Selector="Border">
                      <Setter Property="BorderBrush" Value="Transparent" />
                      <Setter Property="BorderThickness" Value="2" />
                    </Style>
                  </Border.Styles>
                  <RadioButton AutomationProperties.AutomationId="Settings_RadioNeon"
                               GroupName="VisualStyle"
                               IsChecked="{Binding IsNeonSelected}">
                    <StackPanel Spacing="4">
                      <Grid ColumnDefinitions="Auto,*">
                        <Border Width="24" Height="24" CornerRadius="4" Margin="0,0,6,0">
                          <Border.Background>
                            <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                              <GradientStop Color="#0A0C12" Offset="0" />
                              <GradientStop Color="#00C8FF" Offset="0.5" />
                              <GradientStop Color="#FF781E" Offset="1" />
                            </LinearGradientBrush>
                          </Border.Background>
                        </Border>
                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                          <TextBlock AutomationProperties.AutomationId="Settings_TxtNeonName"
                                     Text="{Binding NeonStyleName}"
                                     FontSize="13" FontWeight="SemiBold"
                                     Foreground="{DynamicResource TextPrimaryBrush}" />
                          <TextBlock AutomationProperties.AutomationId="Settings_TxtNeonDesc"
                                     Text="{Binding NeonStyleDesc}"
                                     FontSize="9"
                                     Foreground="{DynamicResource TextMutedBrush}" />
                        </StackPanel>
                      </Grid>
                    </StackPanel>
                  </RadioButton>
                </Border>

                <!-- Retro Style -->
                <Border Grid.Column="2"
                        Margin="4,0,0,0"
                        CornerRadius="8"
                        Padding="10,8"
                        Cursor="Hand"
                        Background="{DynamicResource SurfaceBrush}">
                  <Border.Styles>
                    <Style Selector="Border">
                      <Setter Property="BorderBrush" Value="Transparent" />
                      <Setter Property="BorderThickness" Value="2" />
                    </Style>
                  </Border.Styles>
                  <RadioButton AutomationProperties.AutomationId="Settings_RadioRetro"
                               GroupName="VisualStyle"
                               IsChecked="{Binding IsRetroSelected}">
                    <StackPanel Spacing="4">
                      <Grid ColumnDefinitions="Auto,*">
                        <Border Width="24" Height="24" CornerRadius="4" Margin="0,0,6,0">
                          <Border.Background>
                            <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                              <GradientStop Color="#9CAC70" Offset="0" />
                              <GradientStop Color="#A88048" Offset="0.5" />
                              <GradientStop Color="#303820" Offset="1" />
                            </LinearGradientBrush>
                          </Border.Background>
                        </Border>
                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                          <TextBlock AutomationProperties.AutomationId="Settings_TxtRetroName"
                                     Text="{Binding RetroStyleName}"
                                     FontSize="13" FontWeight="SemiBold"
                                     Foreground="{DynamicResource TextPrimaryBrush}" />
                          <TextBlock AutomationProperties.AutomationId="Settings_TxtRetroDesc"
                                     Text="{Binding RetroStyleDesc}"
                                     FontSize="9"
                                     Foreground="{DynamicResource TextMutedBrush}" />
                        </StackPanel>
                      </Grid>
                    </StackPanel>
                  </RadioButton>
                </Border>
              </Grid>
            </StackPanel>
          </Border>

          <!-- Google Play Games Section -->
          <Border AutomationProperties.AutomationId="Settings_PlayGamesSection"
                  Classes="SettingsCard">
            <StackPanel Spacing="12">
              <StackPanel Orientation="Horizontal" Spacing="8">
                <mi:MaterialIcon Kind="GooglePlay" Width="20" Height="20"
                                 Foreground="#34A853" />
                <TextBlock AutomationProperties.AutomationId="Settings_TxtPlayGamesTitle"
                           Text="{loc:Translate PlayGamesSection}"
                           FontSize="16" FontWeight="Bold"
                           Foreground="{DynamicResource TextPrimaryBrush}" />
              </StackPanel>

              <!-- Aktivierungs-Toggle -->
              <Grid ColumnDefinitions="*,Auto">
                <TextBlock AutomationProperties.AutomationId="Settings_TxtPlayGamesEnabled"
                           Text="{loc:Translate PlayGamesEnabled}"
                           FontSize="12"
                           Foreground="{DynamicResource TextPrimaryBrush}"
                           VerticalAlignment="Center" />
                <ToggleSwitch AutomationProperties.AutomationId="Settings_TogglePlayGames"
                              Grid.Column="1"
                              OnContent="" OffContent=""
                              IsChecked="{Binding PlayGamesEnabled}" />
              </Grid>

              <!-- Sign-In Status -->
              <Grid ColumnDefinitions="*,Auto"
                    IsVisible="{Binding IsPlayGamesSignedIn}">
                <StackPanel>
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtPlayGamesPlayer"
                             Text="{Binding PlayGamesPlayerName}"
                             FontSize="14" FontWeight="SemiBold"
                             Foreground="{DynamicResource SuccessBrush}" />
                </StackPanel>
                <mi:MaterialIcon Grid.Column="1"
                                 Kind="CheckCircle" Width="20" Height="20"
                                 Foreground="{DynamicResource SuccessBrush}" />
              </Grid>

              <!-- Buttons (nur wenn eingeloggt) -->
              <Grid ColumnDefinitions="*,*" IsVisible="{Binding IsPlayGamesSignedIn}">
                <Button AutomationProperties.AutomationId="Settings_BtnLeaderboards"
                        Grid.Column="0"
                        Classes="Secondary"
                        Command="{Binding ShowLeaderboardsCommand}"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Center"
                        Margin="0,0,4,0">
                  <StackPanel Orientation="Horizontal" Spacing="6">
                    <mi:MaterialIcon Kind="TrophyOutline" Width="16" Height="16" />
                    <TextBlock Text="{loc:Translate ShowLeaderboards}" FontSize="12" />
                  </StackPanel>
                </Button>
                <Button AutomationProperties.AutomationId="Settings_BtnGpgsAchievements"
                        Grid.Column="1"
                        Classes="Secondary"
                        Command="{Binding ShowGpgsAchievementsCommand}"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Center"
                        Margin="4,0,0,0">
                  <StackPanel Orientation="Horizontal" Spacing="6">
                    <mi:MaterialIcon Kind="Medal" Width="16" Height="16" />
                    <TextBlock Text="{loc:Translate ShowGpgsAchievements}" FontSize="12" />
                  </StackPanel>
                </Button>
              </Grid>
            </StackPanel>
          </Border>

          <!-- Cloud Save -->
          <Border Classes="SettingsCard" Margin="0,0,0,12">
            <StackPanel Spacing="8">
              <StackPanel Orientation="Horizontal" Spacing="8">
                <mi:MaterialIcon Kind="CloudSync" Width="20" Height="20"
                                 Foreground="{DynamicResource AccentBrush}" />
                <TextBlock Text="{Binding CloudSaveTitle}"
                           FontSize="16" FontWeight="SemiBold"
                           Foreground="{DynamicResource TextPrimaryBrush}" />
              </StackPanel>

              <!-- Toggle -->
              <Grid ColumnDefinitions="*,Auto">
                <TextBlock Grid.Column="0"
                           Text="{Binding CloudSaveToggleText}"
                           FontSize="13"
                           Foreground="{DynamicResource TextSecondaryBrush}"
                           VerticalAlignment="Center" />
                <ToggleSwitch Grid.Column="1"
                              OnContent="" OffContent=""
                              IsChecked="{Binding CloudSaveEnabled}"
                              Command="{Binding ToggleCloudSaveCommand}"
                              VerticalAlignment="Center" />
              </Grid>

              <!-- Speicherort + Status -->
              <StackPanel Orientation="Horizontal" Spacing="8">
                <TextBlock Text="{Binding CloudSaveLocation}"
                           FontSize="11" FontWeight="SemiBold"
                           Foreground="{DynamicResource AccentBrush}" />
                <TextBlock Text="{Binding CloudSyncStatus}"
                           FontSize="11"
                           Foreground="{DynamicResource TextMutedBrush}" />
              </StackPanel>

              <!-- Sync Buttons -->
              <StackPanel Orientation="Horizontal" Spacing="8"
                          IsVisible="{Binding CloudSaveEnabled}">
                <Button Classes="Secondary GameButton"
                        Command="{Binding SyncNowCommand}"
                        IsEnabled="{Binding !IsCloudSyncing}"
                        Height="32" Padding="12,0">
                  <StackPanel Orientation="Horizontal" Spacing="4">
                    <mi:MaterialIcon Kind="CloudUpload" Width="16" Height="16"
                                     Foreground="{DynamicResource TextPrimaryBrush}" />
                    <TextBlock Text="{Binding CloudSaveSyncText}" FontSize="12"
                               Foreground="{DynamicResource TextPrimaryBrush}" />
                  </StackPanel>
                </Button>
                <Button Classes="Secondary GameButton"
                        Command="{Binding DownloadFromCloudCommand}"
                        IsEnabled="{Binding !IsCloudSyncing}"
                        Height="32" Padding="12,0">
                  <StackPanel Orientation="Horizontal" Spacing="4">
                    <mi:MaterialIcon Kind="CloudDownload" Width="16" Height="16"
                                     Foreground="{DynamicResource TextPrimaryBrush}" />
                    <TextBlock Text="{Binding CloudSaveDownloadText}" FontSize="12"
                               Foreground="{DynamicResource TextPrimaryBrush}" />
                  </StackPanel>
                </Button>
              </StackPanel>
            </StackPanel>
          </Border>

          <!-- Language + Premium: Side by Side -->
          <Grid ColumnDefinitions="*,*">

            <!-- Language Section -->
            <Border AutomationProperties.AutomationId="Settings_LanguageSection"
                    Grid.Column="0" Classes="SettingsCard" Margin="0,0,6,0">
              <StackPanel Spacing="12">
                <StackPanel Orientation="Horizontal" Spacing="8">
                  <mi:MaterialIcon Kind="Translate" Width="20" Height="20"
                                   Foreground="{DynamicResource PrimaryBrush}" />
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtLanguageTitle"
                             Text="{loc:Translate LanguageSection}"
                             FontSize="16" FontWeight="Bold"
                             Foreground="{DynamicResource TextPrimaryBrush}" />
                </StackPanel>

                <ComboBox AutomationProperties.AutomationId="Settings_ComboLanguage"
                          ItemsSource="{Binding Languages}"
                          SelectedItem="{Binding SelectedLanguageOption}"
                          HorizontalAlignment="Stretch"
                          Foreground="{DynamicResource TextPrimaryBrush}">
                  <ComboBox.ItemTemplate>
                    <DataTemplate x:DataType="vm:LanguageOption">
                      <TextBlock Text="{Binding DisplayName}"
                                 Foreground="{DynamicResource TextPrimaryBrush}" />
                    </DataTemplate>
                  </ComboBox.ItemTemplate>
                </ComboBox>
              </StackPanel>
            </Border>

            <!-- Premium Section -->
            <Border AutomationProperties.AutomationId="Settings_PremiumSection"
                    Grid.Column="1" Classes="SettingsCard" Margin="6,0,0,0">
              <StackPanel Spacing="12">
                <StackPanel Orientation="Horizontal" Spacing="8">
                  <mi:MaterialIcon Kind="Crown" Width="20" Height="20"
                                   Foreground="Gold" />
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtPremiumTitle"
                             Text="{loc:Translate PremiumSection}"
                             FontSize="16" FontWeight="Bold"
                             Foreground="{DynamicResource AccentBrush}" />
                </StackPanel>

                <!-- Premium Status -->
                <Grid ColumnDefinitions="*,Auto"
                      IsVisible="{Binding IsPremium}">
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtPremiumActive"
                             Text="{loc:Translate PremiumActive}"
                             FontSize="14" FontWeight="Bold"
                             Foreground="{DynamicResource SuccessBrush}" />
                  <mi:MaterialIcon Grid.Column="1"
                                   Kind="Check" Width="24" Height="24"
                                   Foreground="{DynamicResource SuccessBrush}" />
                </Grid>

                <!-- Premium Feature-Liste -->
                <StackPanel Spacing="6" IsVisible="{Binding !IsPremium}">
                  <StackPanel Orientation="Horizontal" Spacing="6">
                    <mi:MaterialIcon Kind="AdsOff" Width="14" Height="14" Foreground="#22C55E" />
                    <TextBlock Text="{loc:Translate PremiumFeatureNoAds}"
                               FontSize="11" Foreground="{DynamicResource TextPrimaryBrush}" />
                  </StackPanel>
                  <StackPanel Orientation="Horizontal" Spacing="6">
                    <mi:MaterialIcon Kind="CircleMultiple" Width="14" Height="14" Foreground="#FFD700" />
                    <TextBlock Text="{loc:Translate PremiumFeature3xCoins}"
                               FontSize="11" Foreground="{DynamicResource TextPrimaryBrush}" />
                  </StackPanel>
                  <StackPanel Orientation="Horizontal" Spacing="6">
                    <mi:MaterialIcon Kind="ChevronDoubleUp" Width="14" Height="14" Foreground="#F59E0B" />
                    <TextBlock Text="{loc:Translate PremiumFeatureAutoDouble}"
                               FontSize="11" Foreground="{DynamicResource TextPrimaryBrush}" />
                  </StackPanel>
                  <StackPanel Orientation="Horizontal" Spacing="6">
                    <mi:MaterialIcon Kind="Flash" Width="14" Height="14" Foreground="#3B82F6" />
                    <TextBlock Text="{loc:Translate PremiumFeatureFreeBoost}"
                               FontSize="11" Foreground="{DynamicResource TextPrimaryBrush}" />
                  </StackPanel>
                  <StackPanel Orientation="Horizontal" Spacing="6">
                    <mi:MaterialIcon Kind="SkipNext" Width="14" Height="14" Foreground="#8B5CF6" />
                    <TextBlock Text="{loc:Translate PremiumFeatureFreeSkip}"
                               FontSize="11" Foreground="{DynamicResource TextPrimaryBrush}" />
                  </StackPanel>
                  <StackPanel Orientation="Horizontal" Spacing="6">
                    <mi:MaterialIcon Kind="HeartPulse" Width="14" Height="14" Foreground="#EF4444" />
                    <TextBlock Text="{loc:Translate PremiumFeatureFreeContinue}"
                               FontSize="11" Foreground="{DynamicResource TextPrimaryBrush}" />
                  </StackPanel>
                  <StackPanel Orientation="Horizontal" Spacing="6">
                    <mi:MaterialIcon Kind="Palette" Width="14" Height="14" Foreground="#A78BFA" />
                    <TextBlock Text="{loc:Translate PremiumFeatureSkins}"
                               FontSize="11" Foreground="{DynamicResource TextPrimaryBrush}" />
                  </StackPanel>
                </StackPanel>

                <!-- Buy Premium (mit Preis) -->
                <Button AutomationProperties.AutomationId="Settings_BtnBuyPremium"
                        Classes="Primary"
                        Background="Gold"
                        Command="{Binding BuyPremiumCommand}"
                        IsVisible="{Binding !IsPremium}"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Center"
                        Padding="12,10">
                  <StackPanel Orientation="Horizontal" Spacing="8"
                              HorizontalAlignment="Center">
                    <mi:MaterialIcon Kind="Crown" Width="20" Height="20"
                                     Foreground="#1A1A2A" />
                    <TextBlock Text="{loc:Translate BuyPremium}"
                               FontSize="16" FontWeight="Bold"
                               Foreground="#1A1A2A" />
                  </StackPanel>
                </Button>

                <!-- Restore Purchases -->
                <Button AutomationProperties.AutomationId="Settings_BtnRestore"
                        Content="{Binding RestoreButtonText}"
                        Classes="Secondary"
                        Command="{Binding RestorePurchasesCommand}"
                        HorizontalAlignment="Left" />
              </StackPanel>
            </Border>

          </Grid>

          <!-- Data + About: Side by Side -->
          <Grid ColumnDefinitions="*,*">

            <!-- Data Section -->
            <Border AutomationProperties.AutomationId="Settings_DataSection"
                    Grid.Column="0" Classes="SettingsCard" Margin="0,0,6,0"
                    BorderBrush="{DynamicResource ErrorBrush}"
                    BorderThickness="2">
              <StackPanel Spacing="12">
                <StackPanel Orientation="Horizontal" Spacing="8">
                  <mi:MaterialIcon Kind="AlertCircle" Width="20" Height="20"
                                   Foreground="{DynamicResource ErrorBrush}" />
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtDataTitle"
                             Text="{loc:Translate DataSection}"
                             FontSize="16" FontWeight="Bold"
                             Foreground="{DynamicResource ErrorBrush}" />
                </StackPanel>

                <Button AutomationProperties.AutomationId="Settings_BtnResetProgress"
                        Content="{loc:Translate ResetProgress}"
                        Classes="Primary"
                        Background="{DynamicResource ErrorBrush}"
                        Command="{Binding ResetProgressCommand}"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Center"
                        FontSize="14" />

                <Button AutomationProperties.AutomationId="Settings_BtnClearHighScores"
                        Content="{loc:Translate ClearHighScores}"
                        Classes="Primary"
                        Background="{DynamicResource ErrorBrush}"
                        Command="{Binding ClearHighScoresCommand}"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Center"
                        FontSize="14" />
              </StackPanel>
            </Border>

            <!-- About Section -->
            <Border AutomationProperties.AutomationId="Settings_AboutSection"
                    Grid.Column="1" Classes="SettingsCard" Margin="6,0,0,0">
              <StackPanel Spacing="6">
                <StackPanel Orientation="Horizontal" Spacing="8">
                  <mi:MaterialIcon Kind="InformationOutline" Width="20" Height="20"
                                   Foreground="{DynamicResource PrimaryBrush}" />
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtAboutTitle"
                             Text="{loc:Translate AboutSection}"
                             FontSize="16" FontWeight="Bold"
                             Foreground="{DynamicResource TextPrimaryBrush}" />
                </StackPanel>

                <Grid ColumnDefinitions="*,Auto">
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtVersion"
                             Text="{loc:Translate Version}"
                             FontSize="14"
                             Foreground="{DynamicResource TextPrimaryBrush}" />
                  <TextBlock AutomationProperties.AutomationId="Settings_TxtAppVersion"
                             Grid.Column="1"
                             Text="{Binding AppVersion}"
                             FontSize="12"
                             Foreground="{DynamicResource TextSecondaryBrush}" />
                </Grid>

                <TextBlock AutomationProperties.AutomationId="Settings_TxtCopyright"
                           Text="{Binding CopyrightText}"
                           FontSize="12"
                           Foreground="{DynamicResource TextSecondaryBrush}" />

                <Button AutomationProperties.AutomationId="Settings_BtnPrivacy"
                        Content="{loc:Translate PrivacyPolicy}"
                        Classes="Secondary"
                        Command="{Binding OpenPrivacyPolicyCommand}"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Center" />
              </StackPanel>
            </Border>

          </Grid>

          <!-- Bottom Spacer (80dp fuer Ad-Banner + Navigation-Bar) -->
          <Border Height="80" />

        </StackPanel>
      </ScrollViewer>

    </Grid>
  </Panel>

</UserControl>
