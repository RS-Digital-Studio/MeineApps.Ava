<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:BomberBlast.ViewModels"
             xmlns:mi="using:Material.Icons.Avalonia"
             xmlns:loc="using:MeineApps.Core.Ava.Localization"
             xmlns:controls="using:BomberBlast.Controls"
             x:Class="BomberBlast.Views.VictoryView"
             x:DataType="vm:VictoryViewModel">

  <!-- Animierter Victory-Hintergrund (Gold-Explosion, Confetti, Fireworks) -->
  <Panel AutomationProperties.AutomationId="Victory_Root">
    <controls:MenuBackgroundCanvas BackgroundTheme="Victory" />

    <!-- 2-Column Layout (Landscape) mit SlideUp Entry-Animation -->
    <Grid ColumnDefinitions="*,*"
          VerticalAlignment="Center"
          Margin="32,16,32,80"
          RenderTransformOrigin="0.5,0.5">
      <Grid.RenderTransform>
        <TranslateTransform Y="0" />
      </Grid.RenderTransform>
      <Grid.Styles>
        <Style Selector="Grid">
          <Style.Animations>
            <Animation Duration="0:0:0.2" Easing="CubicEaseOut" FillMode="Forward">
              <KeyFrame Cue="0%">
                <Setter Property="Opacity" Value="0" />
                <Setter Property="TranslateTransform.Y" Value="20" />
              </KeyFrame>
              <KeyFrame Cue="100%">
                <Setter Property="Opacity" Value="1" />
                <Setter Property="TranslateTransform.Y" Value="0" />
              </KeyFrame>
            </Animation>
          </Style.Animations>
        </Style>
      </Grid.Styles>

      <!-- Links: Trophy + Titel -->
      <StackPanel Grid.Column="0"
                  VerticalAlignment="Center"
                  HorizontalAlignment="Center"
                  Spacing="12">

        <!-- Grosse Krone mit Puls-Animation -->
        <mi:MaterialIcon Kind="Crown" Width="72" Height="72"
                         Foreground="{DynamicResource GoldAccentBrush}"
                         HorizontalAlignment="Center"
                         AutomationProperties.AutomationId="Victory_Crown">
          <mi:MaterialIcon.Styles>
            <Style Selector="mi|MaterialIcon">
              <Style.Animations>
                <Animation Duration="0:0:2" IterationCount="INFINITE">
                  <KeyFrame Cue="0%">
                    <Setter Property="Opacity" Value="1.0" />
                  </KeyFrame>
                  <KeyFrame Cue="50%">
                    <Setter Property="Opacity" Value="0.7" />
                  </KeyFrame>
                  <KeyFrame Cue="100%">
                    <Setter Property="Opacity" Value="1.0" />
                  </KeyFrame>
                </Animation>
              </Style.Animations>
            </Style>
          </mi:MaterialIcon.Styles>
        </mi:MaterialIcon>

        <!-- Titel -->
        <TextBlock Text="{Binding TitleText}"
                   FontSize="42" FontWeight="ExtraBold"
                   Foreground="{DynamicResource GoldAccentBrush}"
                   HorizontalAlignment="Center"
                   AutomationProperties.AutomationId="Victory_TxtTitle" />

        <!-- Untertitel -->
        <TextBlock Text="{Binding SubtitleText}"
                   FontSize="18"
                   Foreground="{DynamicResource TextSecondaryBrush}"
                   HorizontalAlignment="Center"
                   TextWrapping="Wrap"
                   TextAlignment="Center"
                   AutomationProperties.AutomationId="Victory_TxtSubtitle" />

        <!-- Sterne-Anzeige -->
        <Border Background="{DynamicResource SurfaceBrush}"
                CornerRadius="12"
                Padding="20,12"
                HorizontalAlignment="Center"
                BoxShadow="0 4 12 0 #40000000"
                AutomationProperties.AutomationId="Victory_StarsBadge">
          <StackPanel Spacing="8" HorizontalAlignment="Center">
            <StackPanel Orientation="Horizontal" Spacing="8"
                        HorizontalAlignment="Center">
              <mi:MaterialIcon Kind="Star" Width="28" Height="28"
                               Foreground="{DynamicResource GoldAccentBrush}" />
              <TextBlock Text="{Binding StarsText}"
                         FontSize="22" FontWeight="Bold"
                         Foreground="{DynamicResource GoldAccentBrush}"
                         VerticalAlignment="Center"
                         AutomationProperties.AutomationId="Victory_TxtStars" />
            </StackPanel>
          </StackPanel>
        </Border>

      </StackPanel>

      <!-- Rechts: Danke + Buttons -->
      <StackPanel Grid.Column="1"
                  VerticalAlignment="Center"
                  Spacing="16"
                  Margin="16,0">

        <!-- Dankes-Text -->
        <TextBlock Text="{Binding ThanksText}"
                   FontSize="24"
                   FontWeight="SemiBold"
                   Foreground="{DynamicResource TextPrimaryBrush}"
                   HorizontalAlignment="Center"
                   TextWrapping="Wrap"
                   TextAlignment="Center"
                   AutomationProperties.AutomationId="Victory_TxtThanks" />

        <!-- Hauptmenue Button -->
        <Button Command="{Binding GoToMainMenuCommand}"
                Classes="Primary GameButton"
                Background="{DynamicResource GoldAccentBrush}"
                FontSize="20"
                Height="56"
                HorizontalAlignment="Stretch"
                HorizontalContentAlignment="Center"
                AutomationProperties.AutomationId="Victory_BtnMainMenu">
          <StackPanel Orientation="Horizontal" Spacing="8">
            <mi:MaterialIcon Kind="Home" Width="24" Height="24"
                             Foreground="{DynamicResource BackgroundBrush}" />
            <TextBlock Text="{loc:Translate MainMenu}"
                       FontSize="20" FontWeight="Bold"
                       Foreground="{DynamicResource BackgroundBrush}" />
          </StackPanel>
        </Button>

        <!-- Shop Button -->
        <Button Command="{Binding GoToShopCommand}"
                Classes="Secondary GameButton"
                FontSize="18"
                Height="48"
                HorizontalAlignment="Stretch"
                HorizontalContentAlignment="Center"
                AutomationProperties.AutomationId="Victory_BtnShop">
          <StackPanel Orientation="Horizontal" Spacing="8">
            <mi:MaterialIcon Kind="Cart" Width="20" Height="20"
                             Foreground="White" />
            <TextBlock Text="{loc:Translate ShopTitle}"
                       FontSize="18"
                       Foreground="White" />
          </StackPanel>
        </Button>

      </StackPanel>

    </Grid>
  </Panel>

</UserControl>
