<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:BomberBlast.ViewModels"
             xmlns:mi="using:Material.Icons.Avalonia"
             xmlns:loc="using:MeineApps.Core.Ava.Localization"
             xmlns:controls="using:BomberBlast.Controls"
             x:Class="BomberBlast.Views.VictoryView"
             x:DataType="vm:VictoryViewModel">

  <!-- Animierter Victory-Hintergrund (Gold-Explosion, Confetti, Fireworks) -->
  <Panel AutomationProperties.AutomationId="Victory_Root">
    <controls:MenuBackgroundCanvas BackgroundTheme="Victory" />

    <!-- 2-Column Layout (Landscape) mit SlideUp Entry-Animation -->
    <Grid ColumnDefinitions="*,*"
          VerticalAlignment="Center"
          Margin="32,16,32,80"
          RenderTransformOrigin="0.5,0.5">
      <Grid.RenderTransform>
        <TranslateTransform Y="0" />
      </Grid.RenderTransform>
      <Grid.Styles>
        <Style Selector="Grid">
          <Style.Animations>
            <Animation Duration="0:0:0.2" Easing="CubicEaseOut" FillMode="Forward">
              <KeyFrame Cue="0%">
                <Setter Property="Opacity" Value="0" />
                <Setter Property="TranslateTransform.Y" Value="20" />
              </KeyFrame>
              <KeyFrame Cue="100%">
                <Setter Property="Opacity" Value="1" />
                <Setter Property="TranslateTransform.Y" Value="0" />
              </KeyFrame>
            </Animation>
          </Style.Animations>
        </Style>
      </Grid.Styles>

      <!-- Links: Trophy + Titel -->
      <StackPanel Grid.Column="0"
                  VerticalAlignment="Center"
                  HorizontalAlignment="Center"
                  Spacing="12">

        <!-- Grosse Krone mit Puls-Animation -->
        <mi:MaterialIcon Kind="Crown" Width="72" Height="72"
                         Foreground="{DynamicResource GoldAccentBrush}"
                         HorizontalAlignment="Center"
                         AutomationProperties.AutomationId="Victory_Crown">
          <mi:MaterialIcon.Styles>
            <Style Selector="mi|MaterialIcon">
              <Style.Animations>
                <Animation Duration="0:0:2" IterationCount="INFINITE">
                  <KeyFrame Cue="0%">
                    <Setter Property="Opacity" Value="1.0" />
                  </KeyFrame>
                  <KeyFrame Cue="50%">
                    <Setter Property="Opacity" Value="0.7" />
                  </KeyFrame>
                  <KeyFrame Cue="100%">
                    <Setter Property="Opacity" Value="1.0" />
                  </KeyFrame>
                </Animation>
              </Style.Animations>
            </Style>
          </mi:MaterialIcon.Styles>
        </mi:MaterialIcon>

        <!-- Titel -->
        <TextBlock Text="{Binding TitleText}"
                   FontSize="42" FontWeight="ExtraBold"
                   Foreground="{DynamicResource GoldAccentBrush}"
                   HorizontalAlignment="Center"
                   AutomationProperties.AutomationId="Victory_TxtTitle" />

        <!-- Untertitel -->
        <TextBlock Text="{Binding SubtitleText}"
                   FontSize="20"
                   FontWeight="SemiBold"
                   Foreground="{DynamicResource TextSecondaryBrush}"
                   HorizontalAlignment="Center"
                   TextWrapping="Wrap"
                   TextAlignment="Center"
                   AutomationProperties.AutomationId="Victory_TxtSubtitle" />

        <!-- Styled Separator -->
        <Border Height="2" CornerRadius="1"
                HorizontalAlignment="Center"
                Width="180"
                Margin="0,4">
          <Border.Background>
            <LinearGradientBrush StartPoint="0%,50%" EndPoint="100%,50%">
              <GradientStop Color="#00FFD700" Offset="0" />
              <GradientStop Color="#60FFD700" Offset="0.5" />
              <GradientStop Color="#00FFD700" Offset="1" />
            </LinearGradientBrush>
          </Border.Background>
        </Border>

        <!-- Sterne-Anzeige -->
        <Border CornerRadius="12"
                Padding="24,14"
                HorizontalAlignment="Center"
                BoxShadow="0 6 16 0 #50000000"
                BorderBrush="#40FFD700"
                BorderThickness="1"
                AutomationProperties.AutomationId="Victory_StarsBadge">
          <Border.Background>
            <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
              <GradientStop Color="#30FFD700" Offset="0" />
              <GradientStop Color="{DynamicResource SurfaceColor}" Offset="1" />
            </LinearGradientBrush>
          </Border.Background>
          <StackPanel Spacing="8" HorizontalAlignment="Center">
            <StackPanel Orientation="Horizontal" Spacing="8"
                        HorizontalAlignment="Center">
              <mi:MaterialIcon Kind="Star" Width="32" Height="32"
                               Foreground="{DynamicResource GoldAccentBrush}" />
              <TextBlock Text="{Binding StarsText}"
                         FontSize="26" FontWeight="ExtraBold"
                         Foreground="{DynamicResource GoldAccentBrush}"
                         VerticalAlignment="Center"
                         AutomationProperties.AutomationId="Victory_TxtStars" />
            </StackPanel>
          </StackPanel>
        </Border>

      </StackPanel>

      <!-- Rechts: Danke + Buttons -->
      <StackPanel Grid.Column="1"
                  VerticalAlignment="Center"
                  Spacing="16"
                  Margin="16,0">

        <!-- Dankes-Text -->
        <TextBlock Text="{Binding ThanksText}"
                   FontSize="24"
                   FontWeight="SemiBold"
                   Foreground="{DynamicResource TextPrimaryBrush}"
                   HorizontalAlignment="Center"
                   TextWrapping="Wrap"
                   TextAlignment="Center"
                   AutomationProperties.AutomationId="Victory_TxtThanks" />

        <!-- Styled Separator -->
        <Border Height="2" CornerRadius="1"
                HorizontalAlignment="Stretch"
                Margin="20,4">
          <Border.Background>
            <LinearGradientBrush StartPoint="0%,50%" EndPoint="100%,50%">
              <GradientStop Color="#00FFD700" Offset="0" />
              <GradientStop Color="#60FFD700" Offset="0.5" />
              <GradientStop Color="#00FFD700" Offset="1" />
            </LinearGradientBrush>
          </Border.Background>
        </Border>

        <!-- Hauptmenue Button -->
        <Panel MinHeight="56">
          <controls:GameButtonCanvas ButtonColor="#FFD700" DamageLevel="0.6" ButtonSeed="50" />
          <Button Command="{Binding GoToMainMenuCommand}"
                  Classes="Primary GameButton"
                  Background="Transparent"
                  Foreground="White"
                  FontSize="20"
                  HorizontalAlignment="Stretch"
                  HorizontalContentAlignment="Center"
                  VerticalContentAlignment="Center"
                  AutomationProperties.AutomationId="Victory_BtnMainMenu">
            <StackPanel Orientation="Horizontal" Spacing="8">
              <mi:MaterialIcon Kind="Home" Width="24" Height="24"
                               Foreground="White" />
              <TextBlock Text="{loc:Translate MainMenu}"
                         FontSize="20" FontWeight="Bold"
                         Foreground="White" />
            </StackPanel>
          </Button>
        </Panel>

        <!-- Shop Button -->
        <Panel MinHeight="48">
          <controls:GameButtonCanvas ButtonColor="#555555" DamageLevel="0.3" ButtonSeed="51" />
          <Button Command="{Binding GoToShopCommand}"
                  Classes="Secondary GameButton"
                  Background="Transparent"
                  Foreground="White"
                  FontSize="18"
                  HorizontalAlignment="Stretch"
                  HorizontalContentAlignment="Center"
                  VerticalContentAlignment="Center"
                  AutomationProperties.AutomationId="Victory_BtnShop">
            <StackPanel Orientation="Horizontal" Spacing="8">
              <mi:MaterialIcon Kind="Cart" Width="20" Height="20"
                               Foreground="White" />
              <TextBlock Text="{loc:Translate ShopTitle}"
                         FontSize="18"
                         Foreground="White" />
            </StackPanel>
          </Button>
        </Panel>

      </StackPanel>

    </Grid>
  </Panel>

</UserControl>
